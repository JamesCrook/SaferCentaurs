<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SeqQuests Management Console</title>
    <link rel="icon" href="../wheel.ico">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;600&display=swap" rel="stylesheet">
    <!-- NGL Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ngl/2.0.0-dev.37/ngl.js"></script>
    <link rel="stylesheet" type="text/css" href="./lcars.css">
    <script src="./lcars.js"></script>
    <script src="./lcars_ui.js"></script>
    <script src="./lcars-bio.js"></script>
    <script src="../js/utilities/nav.js"></script>

    <style>
        /* Viewer Area - The Fix: Relative parent + Absolute child */
        #viewport-container {
            flex: 1;
            position: relative;
            background: #000;
            border: 2px solid #222;
            border-radius: 10px;
            overflow: hidden;
            min-height: 0;
        }

        #viewport {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        /* Status & Labels */
        .status-display {
            position: relative;
            top: 15px;
            right: 15px;
            text-align: right;
            pointer-events: none;
            z-index: 10;
            height:0px;
            overflow:display;
        }

        .label-id { font-size: 2.5rem; line-height: 1; color: var(--lcars-tan); }
        .label-sub { font-size: 1rem; color: var(--lcars-orange); }

        .loading-overlay {
            position: absolute;
            inset: 0;
            background: rgba(0,0,0,0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            font-size: 2rem;
            letter-spacing: 5px;
            flex-direction: column;
        }
    </style>

  </head>
  <body>
    <div class="lcars-wipe-overlay lcars-wipe-h" id="wipe-overlay"></div>
    <div class="lcars-scan-line lcars-scan-h" id="scan-line"></div>
    <!-- First Panel -->
    <div class="lcars-panel" style="flex:1.3">
      <div class="lcars-sidebar lcars-left lcars-optional4">
        <div class="lcars-block lcars-tan" data-group="Cartoon">Cartoon</div>
        <div class="lcars-block lcars-rust" data-group="Spacefill">Spacefill</div>
        <div class="lcars-block lcars-sblock lcars-orange lcars-bl" data-group="Surface">Surface</div>
      </div>
      <div class="lcars-central">
        <div class="lcars-panel-content lcars-blp lcars-brpo" id="MainPanel">
            <div class="status-display">
                <div class="label-id" id="mol-id">LOADING...</div>
                <div class="label-sub" id="mol-pdb">PDB ARCHIVE ACCESS</div>
            </div>

            <div id="viewport-container">
                <div id="viewport"></div>
                <div id="loading" class="loading-overlay">
                    <div id="status-text">INITIALIZING...</div>
                    <div style="font-size: 0.8rem; margin-top: 10px; color: var(--lcars-orange)">CONNECTING TO PDB ARCHIVE</div>
                </div>
            </div>
        </div>
        <div class="lcars-bar lcars-barbot">
          <div class="lcars-block lcars-sblock lcars-orange stub" data-group="Surface">&nbsp;
          </div>
          <div class="lcars-block lcars-tan" data-group="Ball + Stick">Ball + Stick</div>
          <div class="lcars-block lcars-orange" data-group="Licorice">Licorice</div>
          <div class="lcars-block lcars-pink lcars-optional" data-group="Recenter">Recenter</div>
          <div class="lcars-block lcars-ssblock lcars-purple stub" data-group="Reset">&nbsp;
          </div>
        </div>
      </div>
      <div class="lcars-sidebar lcars-right lcars-optional2">
        <div class="lcars-block lcars-sblock lcars-tan" data-group="Dark UI">Dark</div>
        <div class="lcars-block lcars-yellow" data-group="Light UI">Light</div>
        <div class="lcars-block lcars-orange" data-group="Toggle Spin">Spin</div>
        <div class="lcars-block lcars-purple lcars-br" data-group="Reset">Reset</div>
      </div>
    </div>
    <div class="lcars-shim">
    </div>
    <div class="lcars-panel" id="protein-panel">
      <div class="lcars-sidebar lcars-left lcars-optional2">
        <!-- These will be populated dynamically -->
        <div class="lcars-block lcars-green lcars-tl" data-group="Loading">LOADING...</div>
        <div class="lcars-block lcars-cyan" data-group="Loading">LOADING...</div>
        <div class="lcars-block lcars-blood-red" data-group="Loading">LOADING...</div>
      </div>
      <div class="lcars-central">
        <div class="lcars-bar lcars-bartop">
          <!-- Navigation and protein buttons -->
          <div class="lcars-block lcars-sssblock lcars-purple stub" data-group="PrevBatch">◄<</div>
          <div class="lcars-block lcars-yellow" data-group="Loading">LOADING...</div>
          <div class="lcars-block lcars-tan lcars-optional" data-group="Loading">LOADING...</div>
          <div class="lcars-block lcars-green" data-group="Loading">LOADING...</div>
          <div class="lcars-block lcars-sblock lcars-purple stub" data-group="NextBatch">>►</div>
        </div>
        <div class="lcars-panel-content lcars-tlpo lcars-trp" id="SubPanel">
          <!-- Info sections will be dynamically generated -->
          <section id="info-loading">
            <h2>INITIALIZING ATLAS...</h2>
            <p>Loading protein database...</p>
          </section>
        </div>
      </div>
      <div class="lcars-sidebar lcars-right lcars-optional4">
        <!-- These stay static -->
        <div class="lcars-block lcars-sblock lcars-beige lcars-tr" data-group="Overview">OVERVIEW</div>
        <div class="lcars-block lcars-blue" style="visibility:hidden;">&nbsp;</div>
        <div class="lcars-block lcars-mblock lcars-yellow" data-group="Credits">CREDITS</div>
      </div>
    </div>
    <div id="config-modal" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 100; background: var(--bg-secondary); padding: 20px; border: 1px solid var(--accent-primary); width: 80%; max-width: 800px; max-height: 80vh;">
      <div id="modal-content">
        <div id="config-container" style="min-height:0px;">
        </div>
      </div>
      <div class="modal-footer" style="margin-top: 20px;">
        <button onclick="closeModal()">Close</button>
      </div>
    </div>
    <script>
    // Initialize blocks when the DOM is loaded
        document.addEventListener('DOMContentLoaded', activateBlocks());
    </script>
  </body>
</html>